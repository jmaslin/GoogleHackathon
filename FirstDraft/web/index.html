<!DOCTYPE html>

<html lang="en">
	<head>
		<title>GoogleHack4</title>

		<script src="assets/js/jquery-2.1.1.min.js"></script>

		<!-- BOOTSTRAP -->
		<link href="assets/css/bootstrap.css" rel="stylesheet" />
		<script src="assets/js/bootstrap.js"></script>

		<!-- CUSTOM -->
		<link href="assets/css/design.css" rel="stylesheet" />

    <!-- FONTS -->
    <link href='http://fonts.googleapis.com/css?family=Lato|Source+Sans+Pro|Ubuntu\Bitter' rel='stylesheet' type='text/css'>

	</head>

	<body>
 
  	<div id="topContainer" class="container-fluid">

  		<div id="top" class="row-fluid text-center">
  			<div class="col-sm-6 col-sm-offset-3">
  				<h1 class="title">GoodsX<br /><small>Connecting people <em>the smart way.</em></small></h1>
  				<hr>
  			</div>
  		</div>

  		<div class="row-fluid text-center">
  			<div class="col-sm-6 col-sm-offset-3">
  				<h2>Choose some options.</h2>
  				<br>

          <form id="submitReq">
  					  <div class="form-group">
    						<label for="purpose">Purpose</label>
    						<div class="radio">
    							<label>
    								<input type="radio" name="purposeRadio" id="purpose1" value="1">
    								I want
    							</label>
    							<label>
    								<input type="radio" name="purposeRadio" id="purpose2" value="2">
    								I have
    							</label>
    						</div>
              </div>
  						<div class="form-group">
  							<label for="request">Request</label>
  							<input type="text" class="form-control" name="requestType" id="requestType" autocomplete="off" placeholder="Enter what you have or need.">
  						</div>
  						<div class="form-group">
  							<label for="location">Location</label>
  							<input type="text" class="form-control" name="location" id="location" autocomplete="off" placeholder="Enter your general location.">
  						</div>
  						<label for="contact">Contact Method(s)</label>
  						<div class="input-group">
  							<span class="input-group-addon">
  								<input id="emailCheck" type="checkbox">
  							</span>
  							<input type="text" class="form-control" name="contactEmail" id="contactEmail" autocomplete="off" placeholder="Email">
  						</div>
  						<div class="input-group">
  							<span class="input-group-addon">
  								<input id="phoneCheck" type="checkbox">
  							</span>
  							<input type="text" class="form-control" name="contactPhone" id="contactPhone" autocomplete="off" placeholder="Phone">
  						</div>
  						<!-- TODO: Make this better. All of it. -->
  						<br>
  						<!-- <div class="form-group">
  							<label for="request">Password (Optional, create an account to manage requests.)</label>
  							<input type="password" class="form-control" name="password" id="password" placeholder="Password">
  						  <input type="password" class="form-control" name="passwordConf" id="passwordConf" placeholder="Password Confirm">			
  						</div> -->
       	  	  <button id="submitRequest" type="submit" class="btn btn-default">Submit</button>
       	    </form>

  			</div>
  		</div>

      <div class="row-fluid text-center">
        <div class="col-sm-6 col-sm-offset-3">
          <footer>
            Created By Team Fantastic 404: Not Found
          </footer>
        </div>
      </div>

  	</div>


  </body>
</html>


	<script type="text/javascript">

    $( document ).ready(function() {

      var locLat = "0";
      var locLng = "0";
    });

  	$('#submitRequest').on("click", function(e) {
			e.preventDefault(); // Got to error validates the datas firsts

			if (validateInput()) {
				submitToJSON(); // Now our Java friends can do stuff
			}

		});

		$('#location').on('change', function() {

			var location = $('#location').val();

			$.ajax({
				type: "get", 
				url: "https://maps.googleapis.com/maps/api/geocode/json", 
				data: "key=AIzaSyC3Pl0tPmMQj5vTWSG5hzZduffke73rvpY&address="+location, 
				dataType: "json", 
				success: function(data) {

          locLat = data.results[0].geometry.location.lat;
          locLng = data.results[0].geometry.location.lng;
				}
			});



		});

		function getAddress() {

			location = $('#location').val();

			$.ajax({
				type: "get", 
				url: "http://maps.googleapis.com/maps/api/geocode/output", 
				data: "key=AIzaSyC3Pl0tPmMQj5vTWSG5hzZduffke73rvpY&address="+location, 
				dataType: "json", 
				success: function(data) {
					// console.log(data);
				}
			});
		}

		function validateInput() {
			// Limited error checking because will be checked in backend.

			validateRequest();
			if ($('#emailCheck').attr('checked')) {
				validateEmail();
			}

			return true;
		}

		// TODO: Dropdown/Suggestions from common requests.
		function validateRequest() {

			validReq = false;

			request = $('#requestType').val();

			if (request != "") {
				validReq = true;
			}

		}

		function submitToJSON() {

      var userData = {
        "purpose": $('[name=purposeRadio]').val(), 
        "request": $('#requestType').val(), 
        "locLat": locLat, 
        "locLng": locLng, 
        "contactPhone": $('#contactPhone').val(), 
        "contactEmail": $('#contactEmail').val()
      }

			$.ajax({
				type: "post", 
				url: "/FirstDraft/src/java/MatchServlet.java",      
				data: userData, 
				dataType: "html", 
				success: function(data) {
				}

			});
		}

	</script>


        <!-- Formatting:

        - Have user enter location
        - Determine if requests exist near location + dispaly
        - Allow user to enter own request
        - Determine length of time or urgency
        - Submit request to db

         -->

        <!-- TODO: LOG IN BUTTON -->

          <!-- Request: Either buying or selling. What it is. Location. Email or phone, but have one. -->

          <!-- Field One: WANT / NEED -->
          <!-- Field Two: ITEM / SERVICE -->
          <!-- Field Three: Must choose AT LEAST one: -->
            <!-- Field Three: EMAIL (Optional) -->
            <!-- Field Three Part Two: PHONE (Optional) -->
          <!-- FIELD Four: PASSWORD (Optional, used to make account to manage requests.) -->
        <!-- Formatting:

        - Have user enter location
        - Determine if requests exist near location + dispaly
        - Allow user to enter own request
        - Determine length of time or urgency
        - Submit request to db

         -->

        <!-- TODO: LOG IN BUTTON -->

          <!-- Request: Either buying or selling. What it is. Location. Email or phone, but have one. -->

          <!-- Field One: WANT / NEED -->
          <!-- Field Two: ITEM / SERVICE -->
          <!-- Field Three: Must choose AT LEAST one: -->
            <!-- Field Three: EMAIL (Optional) -->
            <!-- Field Three Part Two: PHONE (Optional) -->
          <!-- FIELD Four: PASSWORD (Optional, used to make account to manage requests.) -->